<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Solicitações de Manutenção</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <style>
        body {
            background-color: #121212; /* Fundo preto/cinza escuro */
            color: #e0e0e0; /* Cor do texto principal (cinza claro) */
            font-family: Arial, sans-serif;
        }

        .navbar {
            background-color: #1f1f1f !important; /* Cor de fundo da navbar mais escura */
        }
        
        h1 {
            color: #9c27b0; /* Roxo vibrante para o título principal */
            margin-top: 20px;
            margin-bottom: 30px;
            text-align: center;
            font-weight: bold;
        }

        .container {
            background: #1e1e1e; /* Fundo do container um pouco mais claro que o body */
            padding: 20px;
            margin-top: 30px;
            border-radius: 10px;
            border: 1px solid #333; /* Borda sutil */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        /* Estilos da Tabela */
        table {
            background: #1e1e1e;
        }

        thead {
            background-color: #7b1fa2; /* Roxo mais escuro para o cabeçalho da tabela */
            color: #fff;
        }
        
        /* Remove o fundo listrado padrão e define uma cor de fundo para as linhas */
        .table-striped>tbody>tr:nth-of-type(odd)>* {
            --bs-table-bg-state: rgba(255, 255, 255, 0.05); /* Fundo levemente mais claro para linhas ímpares */
        }
        
        .table-hover>tbody>tr:hover>* {
            --bs-table-bg-state: rgba(156, 39, 176, 0.3); /* Efeito hover roxo translúcido */
            color: #fff;
        }

        th, td {
            vertical-align: middle;
            text-align: center;
            border-color: #444; /* Cor da borda das células */
        }

        /* Estilos dos Botões */
        .btn-primary {
            background-color: #9c27b0; /* Roxo */
            border: none;
        }

        .btn-primary:hover {
            background-color: #7b1fa2; /* Roxo mais escuro no hover */
        }
        
        /* Ajuste para o botão 'Finalizar' desabilitado */
        .btn-primary.disabled, .btn-primary:disabled {
            background-color: #555;
            border-color: #555;
            color: #aaa;
        }

        .btn-danger {
            background-color: #d32f2f;
            border: none;
        }

        .btn-danger:hover {
            background-color: #b71c1c;
        }
        
        /* Ajuste para o texto "muted" no tema escuro */
        .text-muted {
            color: #888 !important;
        }

    </style>
</head>

<body>
    <nav class="navbar border-bottom border-secondary" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand" th:href="@{/maintenance}">Sistema de Manutenção</a>
        </div>
    </nav>
    <main class="container">

        <h1>Lista de Solicitações</h1>

        <table class="table table-striped table-hover table-dark" th:unless="${#lists.isEmpty(requests)}">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Solicitante</th>
                    <th scope="col">Descrição do Problema</th>
                    <th scope="col">Data da Solicitação</th>
                    <th scope="col">Data de Finalização</th>
                    <th scope="col">Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="request : ${requests}">
                    <th scope="row" th:text="${request.id}">---</th>
                    <td th:text="${request.requesterName}">---</td>
                    <td th:text="${request.problemDescription}">---</td>
                    <td th:text="${#temporals.format(request.requestTimestamp, 'dd/MM/yyyy HH:mm')}">---</td>
                    <td
                        th:text="${request.finishedTimestamp != null ? #temporals.format(request.finishedTimestamp, 'dd/MM/yyyy HH:mm') : '-'}">
                        ---</td>
                    <td>
                        <form class="d-inline" th:action="@{/maintenance/finish/{id}(id=${request.id})}" method="POST">
                            <button type="submit" class="btn btn-sm btn-primary"
                                th:classappend="${request.finishedTimestamp} ? 'disabled' : ''">Finalizar</button>
                        </form>
                        <a th:href="@{/maintenance/delete/{id}(id=${request.id})}" class="btn btn-sm btn-danger">Excluir</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <p th:if="${#lists.isEmpty(requests)}" class="text-center text-muted">Nenhuma solicitação de manutenção
            cadastrada.</p>

        <div class="text-center mt-3">
            <a th:href="@{/maintenance/create}" class="btn btn-primary">Nova Solicitação</a>
        </div>

    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>

</html>